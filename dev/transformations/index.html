<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Transformations · DataAugmentation.jl</title><meta name="title" content="Transformations · DataAugmentation.jl"/><meta property="og:title" content="Transformations · DataAugmentation.jl"/><meta property="twitter:title" content="Transformations · DataAugmentation.jl"/><meta name="description" content="Documentation for DataAugmentation.jl."/><meta property="og:description" content="Documentation for DataAugmentation.jl."/><meta property="twitter:description" content="Documentation for DataAugmentation.jl."/><meta property="og:url" content="https://fluxml.ai/DataAugmentation.jl/stable/transformations/"/><meta property="twitter:url" content="https://fluxml.ai/DataAugmentation.jl/stable/transformations/"/><link rel="canonical" href="https://fluxml.ai/DataAugmentation.jl/stable/transformations/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/flux.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DataAugmentation.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">DataAugmentation.jl</a></li><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li class="is-active"><a class="tocitem" href>Transformations</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Projective-transformations"><span>Projective transformations</span></a></li><li><a class="tocitem" href="#Affine-transformations"><span>Affine transformations</span></a></li><li><a class="tocitem" href="#Crops"><span>Crops</span></a></li><li class="toplevel"><a class="tocitem" href="#Color-transformations"><span>Color transformations</span></a></li><li class="toplevel"><a class="tocitem" href="#Stochastic-transformations"><span>Stochastic transformations</span></a></li></ul></li><li><span class="tocitem">Build your transformations</span><ul><li><a class="tocitem" href="../iteminterface/">Item Interface</a></li><li><a class="tocitem" href="../tfminterface/">Transform Interface</a></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Projective Interface</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../projective/intro/">Intro</a></li><li><a class="tocitem" href="../projective/data/">Data</a></li><li><a class="tocitem" href="../projective/gallery/">Gallery</a></li></ul></li></ul></li><li><span class="tocitem">Misc</span><ul><li><a class="tocitem" href="../buffering/">Buffering</a></li><li><a class="tocitem" href="../preprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../ref/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Transformations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Transformations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/FluxML/DataAugmentation.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/FluxML/DataAugmentation.jl/blob/master/docs/src/transformations.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h1><p>Using  transformations is easy. Simply <code>compose</code> them:</p><pre><code class="language-julia hljs">tfm = Rotate(10) |&gt; ScaleRatio((0.7,0.1,1.2)) |&gt; FlipX{2}() |&gt; Crop((128, 128))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">DataAugmentation.CroppedProjectiveTransform{DataAugmentation.ComposedProjectiveTransform{Tuple{Rotate{2, Type{Rotations.RotMatrix{2, Float64, L} where L}, Distributions.Uniform}, ScaleRatio{3}, FlipDim{2}}}, Tuple{Crop{2, DataAugmentation.FromOrigin}}}(DataAugmentation.ComposedProjectiveTransform{Tuple{Rotate{2, Type{Rotations.RotMatrix{2, Float64, L} where L}, Distributions.Uniform}, ScaleRatio{3}, FlipDim{2}}}((Rotate{2, Type{Rotations.RotMatrix{2, Float64, L} where L}, Distributions.Uniform}(Distributions.Uniform{Float64}(a=-10.0, b=10.0)), ScaleRatio{3}((0.7, 0.1, 1.2)), FlipDim{2}(2))), (Crop{2, DataAugmentation.FromOrigin}((128, 128), DataAugmentation.FromOrigin()),))</code></pre><h1 id="Projective-transformations"><a class="docs-heading-anchor" href="#Projective-transformations">Projective transformations</a><a id="Projective-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Projective-transformations" title="Permalink"></a></h1><p>DataAugmentation.jl has great support for transforming spatial data like images and keypoints. Most of these transformations are projective transformations. For our purposes, a projection means a mapping between two coordinate spaces. In computer vision, these are frequently used for preprocessing and augmenting image data: images are randomly scaled, maybe flipped horizontally and finally cropped to the same size.</p><p>This library generalizes projective transformations for different kinds of image and keypoint data in an N-dimensional Euclidean space. It also uses composition for performance improvements like fusing affine transformations.</p><p>Unlike mathematical objects, the spatial data we want to transform has spatial bounds. For an image, these bounds are akin to the array size. But keypoint data aligned with an image has the same bounds even if they are not explicitly encoded in the representation of the data. These spatial bounds can be used to dynamically create useful transformations. For example, a rotation around the center or a horizontal flip of keypoint annotations can be calculated from the bounds.</p><p>Often, we also want to crop an area from the projected results. By evaluating only the parts of a projection that fall inside the cropped area, a lot of unnecessary computation can be avoided.</p><p>Projective transformations include:</p><ol><li><a href="#Affine-transformations">Affine transformations</a></li><li><a href="#Crops">Crops</a></li></ol><h2 id="Affine-transformations"><a class="docs-heading-anchor" href="#Affine-transformations">Affine transformations</a><a id="Affine-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Affine-transformations" title="Permalink"></a></h2><p>Affine transformations are a subgroup of projective transformations that can be composed very efficiently: composing two affine transformations results in another affine transformation. Affine transformations can represent translation, scaling, reflection and rotation. Available <code>Transform</code>s are:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.FlipDim-transformations" href="#DataAugmentation.FlipDim-transformations"><code>DataAugmentation.FlipDim</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlipDim{N}(dim)</code></pre><p>Reflect <code>N</code> dimensional data along the axis of dimension <code>dim</code>. Must satisfy 1 &lt;= <code>dim</code> &lt;= <code>N</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">tfm = FlipDim{2}(1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L259-L269">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.FlipX-transformations" href="#DataAugmentation.FlipX-transformations"><code>DataAugmentation.FlipX</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlipX{N}()</code></pre><p>Flip <code>N</code> dimensional data along the x-axis. 2D images use (r, c) = (y, x) convention such that x-axis flips occur along the second dimension. For N &gt;= 3, x-axis flips occur along the first dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L275-L281">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.FlipY-transformations" href="#DataAugmentation.FlipY-transformations"><code>DataAugmentation.FlipY</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlipY{N}()</code></pre><p>Flip <code>N</code> dimensional data along the y-axis. 2D images use (r, c) = (y, x) convention such that y-axis flips occur along the first dimension. For N &gt;= 3, y-axis flips occur along the second dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L286-L292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.FlipZ-transformations" href="#DataAugmentation.FlipZ-transformations"><code>DataAugmentation.FlipZ</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FlipZ{N}()</code></pre><p>Flip <code>N</code> dimensional data along the z-axis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L297-L301">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.Reflect-transformations" href="#DataAugmentation.Reflect-transformations"><code>DataAugmentation.Reflect</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Reflect(γ)
Reflect(distribution)</code></pre><p>Reflect 2D spatial data around the center by an angle chosen at uniformly from [-γ, γ], an angle given in degrees.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the angle is selected.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">tfm = Reflect(10)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L212-L227">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.Rotate-transformations" href="#DataAugmentation.Rotate-transformations"><code>DataAugmentation.Rotate</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Rotate(γ)
Rotate(distribution)
Rotate(α, β, γ)
Rotate(α_distribution, β_distribution, γ_distribution)</code></pre><p>Rotate spatial data around its center. Rotate(γ) is a 2D rotation by an angle chosen uniformly from [-γ, γ], an angle given in degrees. Rotate(α, β, γ) is a 3D rotation by angles chosen uniformly from [-α, α], [-β, β], and [-γ, γ], for X, Y, and Z rotations.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the angle is selected.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">tfm2d = Rotate(10)
apply(tfm2d, Image(rand(Float32, 16, 16)))

tfm3d = Rotate(10, 20, 30)
apply(tfm3d, Image(rand(Float32, 16, 16, 16)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L121-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.RotateX-transformations" href="#DataAugmentation.RotateX-transformations"><code>DataAugmentation.RotateX</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RotateX(γ)
RotateX(distribution)</code></pre><p>X-Axis rotation of 3D spatial data around the center by an angle chosen uniformly from [-γ, γ], an angle given in degrees.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the angle is selected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L163-L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.RotateY-transformations" href="#DataAugmentation.RotateY-transformations"><code>DataAugmentation.RotateY</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RotateY(γ)
RotateY(distribution)</code></pre><p>Y-Axis rotation of 3D spatial data around the center by an angle chosen uniformly from [-γ, γ], an angle given in degrees.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the angle is selected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L175-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.RotateZ-transformations" href="#DataAugmentation.RotateZ-transformations"><code>DataAugmentation.RotateZ</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RotateZ(γ)
RotateZ(distribution)</code></pre><p>Z-Axis rotation of 3D spatial data around the center by an angle chosen uniformly from [-γ, γ], an angle given in degrees.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the angle is selected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L187-L196">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.ScaleKeepAspect-transformations" href="#DataAugmentation.ScaleKeepAspect-transformations"><code>DataAugmentation.ScaleKeepAspect</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ScaleKeepAspect(minlengths) &lt;: ProjectiveTransform</code></pre><p>Scales the shortest side of <code>item</code> to <code>minlengths</code>, keeping the original aspect ratio.</p><p><strong>Examples</strong></p><pre><code class="language- hljs">using DataAugmentation, TestImages
image = testimage(&quot;lighthouse&quot;)
tfm = ScaleKeepAspect((200, 200))
apply(tfm, Image(image))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L26-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.ScaleFixed-transformations" href="#DataAugmentation.ScaleFixed-transformations"><code>DataAugmentation.ScaleFixed</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ScaleFixed(sizes)</code></pre><p>Projective transformation that scales sides to <code>sizes</code>, disregarding aspect ratio.</p><p>See also <a href="../ref/#DataAugmentation.ScaleKeepAspect"><code>ScaleKeepAspect</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L69-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.ScaleRatio-transformations" href="#DataAugmentation.ScaleRatio-transformations"><code>DataAugmentation.ScaleRatio</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ScaleRatio(minlengths) &lt;: ProjectiveTransform</code></pre><p>Scales the aspect ratio</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.WarpAffine-transformations" href="#DataAugmentation.WarpAffine-transformations"><code>DataAugmentation.WarpAffine</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WarpAffine(σ = 0.1) &lt;: ProjectiveTransform</code></pre><p>A three-point affine warp calculated by randomly moving 3 corners of an item. Similar to a random translation, shear and rotation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/warp.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.Zoom-transformations" href="#DataAugmentation.Zoom-transformations"><code>DataAugmentation.Zoom</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Zoom(scales = (1, 1.2)) &lt;: ProjectiveTransform
Zoom(distribution)</code></pre><p>Zoom into an item by a factor chosen from the interval <code>scales</code> or <code>distribution</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/affine.jl#L98-L104">source</a></section></article><h2 id="Crops"><a class="docs-heading-anchor" href="#Crops">Crops</a><a id="Crops-1"></a><a class="docs-heading-anchor-permalink" href="#Crops" title="Permalink"></a></h2><p>To get a cropped result, simply <code>compose</code> any <code>ProjectiveTransform</code> with</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.CenterCrop-transformations" href="#DataAugmentation.CenterCrop-transformations"><code>DataAugmentation.CenterCrop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Crop(sz, FromCenter())</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/crop.jl#L31-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.RandomCrop-transformations" href="#DataAugmentation.RandomCrop-transformations"><code>DataAugmentation.RandomCrop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Crop(sz, FromRandom())</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/projective/crop.jl#L35-L37">source</a></section></article><h1 id="Color-transformations"><a class="docs-heading-anchor" href="#Color-transformations">Color transformations</a><a id="Color-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Color-transformations" title="Permalink"></a></h1><p>DataAugmentation.jl currently supports the following color transformations for augmentation:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.AdjustBrightness-transformations" href="#DataAugmentation.AdjustBrightness-transformations"><code>DataAugmentation.AdjustBrightness</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AdjustBrightness(δ = 0.2)
AdjustBrightness(distribution)</code></pre><p>Adjust the brightness of an image by a factor chosen uniformly from <code>f ∈ [1-δ, 1+δ]</code> by multiplying each color channel by <code>f</code>.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the factor is selected.</p><p>Pixels are clamped to [0,1] unless <code>clamp=false</code> is passed.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using DataAugmentation, TestImages

item = Image(testimage(&quot;lighthouse&quot;))
tfm = AdjustBrightness(0.2)
titems = [apply(tfm, item) for _ in 1:8]
showgrid(titems; ncol = 4, npad = 16)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/colortransforms.jl#L2-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.AdjustContrast-transformations" href="#DataAugmentation.AdjustContrast-transformations"><code>DataAugmentation.AdjustContrast</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AdjustContrast(factor = 0.2)
AdjustContrast(distribution)</code></pre><p>Adjust the contrast of an image by a factor chosen uniformly from <code>f ∈ [1-δ, 1+δ]</code>.</p><p>Pixels <code>c</code> are transformed <code>c + μ*(1-f)</code> where <code>μ</code> is the mean color of the image.</p><p>You can also pass any <code>Distributions.Sampleable</code> from which the factor is selected.</p><p>Pixels are clamped to [0,1] unless <code>clamp=false</code> is passed.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using DataAugmentation, TestImages

item = Image(testimage(&quot;lighthouse&quot;))
tfm = AdjustContrast(0.2)
titems = [apply(tfm, item) for _ in 1:8]
showgrid(titems; ncol = 4, npad = 16)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/colortransforms.jl#L62-L87">source</a></section></article><h1 id="Stochastic-transformations"><a class="docs-heading-anchor" href="#Stochastic-transformations">Stochastic transformations</a><a id="Stochastic-transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Stochastic-transformations" title="Permalink"></a></h1><p>When augmenting data, it is often useful to apply a transformation only with some probability or choose from a set of transformations. Unlike in other data augmentation libraries like <em>albumentations</em>, in DataAugmentation.jl you can use wrapper transformations for this functionality.</p><ul><li><a href="../ref/#DataAugmentation.Maybe"><code>Maybe</code></a><code>(tfm, p = 0.5)</code> applies a transformation with probability <code>p</code>; and</li><li><a href="../ref/#DataAugmentation.OneOf"><code>OneOf</code></a><code>([tfm1, tfm2])</code> randomly selects a transformation to apply.</li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.Maybe-transformations" href="#DataAugmentation.Maybe-transformations"><code>DataAugmentation.Maybe</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Maybe(tfm, p = 0.5) &lt;: Transform</code></pre><p>With probability <code>p</code>, apply transformation <code>tfm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/oneof.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.OneOf-transformations" href="#DataAugmentation.OneOf-transformations"><code>DataAugmentation.OneOf</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OneOf(tfms)
OneOf(tfms, ps)</code></pre><p>Apply one of <code>tfms</code> selected randomly with probability <code>ps</code> each or uniformly chosen if no <code>ps</code> is given.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/oneof.jl#L1-L7">source</a></section></article><p>Let&#39;s say we have an image classification dataset. For most datasets, horizontally flipping the image does not change the label: a flipped image of a cat still shows a cat. So let&#39;s flip every image horizontally half of the time to improve the generalization of the model we might be training.</p><pre><code class="language-julia hljs">using DataAugmentation, TestImages
item = Image(testimage(&quot;lighthouse&quot;))
tfm = Maybe(FlipX{2}())
titems = [apply(tfm, item) for _ in 1:8]
showgrid(titems; ncol = 4, npad = 16)</code></pre><img src="69c08eba.png" alt="Example block output"/><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DataAugmentation.ImageToTensor-transformations" href="#DataAugmentation.ImageToTensor-transformations"><code>DataAugmentation.ImageToTensor</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ImageToTensor()</code></pre><p>Expands an <code>Image{N, T}</code> of size <code>(height, width, ...)</code> to an <code>ArrayItem{N+1}</code> with size <code>(width, height, ..., ch)</code> where <code>ch</code> is the number of color channels of <code>T</code>.</p><p>Supports <code>apply!</code>.</p><p><strong>Examples</strong></p><p>{cell=ImageToTensor}</p><pre><code class="language-julia hljs">using DataAugmentation, Images

h, w = 40, 50
image = Image(rand(RGB, h, w))
tfm = ImageToTensor()
apply(tfm, image) # ArrayItem in WHC format of size (50, 40, 3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/FluxML/DataAugmentation.jl/blob/95d17647212f02028b709b5f730c3024232a324b/src/preprocessing.jl#L133-L153">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quickstart</a><a class="docs-footer-nextpage" href="../iteminterface/">Item Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Sunday 20 October 2024 15:27">Sunday 20 October 2024</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
